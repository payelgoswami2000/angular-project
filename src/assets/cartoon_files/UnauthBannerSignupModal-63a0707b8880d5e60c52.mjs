(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([["UnauthBannerSignupModal"],{kw3g:function(e,t,n){n.r(t),n.d(t,"UnauthBannerSignupModal",(function(){return y}));var i=n("q1tI"),a=n.n(i),o=n("/MKj"),l=n("gxu6"),s=n("Cufx"),r=n("iFas"),d=n("Ye/N"),c=n("2MPc"),h=n("ANjH"),p=n("UPfj"),u=n("28DW"),g=n("AmNm"),m=n("3fKP"),b=n("pLLR"),_=n("n6mq");function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C={container:{background:"rgba(0,0,0,0.65)",transition:"height 0.5s cubic-bezier(0.26, 0.87, 0.74, 0.93)",WebkitTransition:"height 0.5s cubic-bezier(0.26, 0.87, 0.74, 0.93)",WebkitBackfaceVisibility:"hidden",zIndex:2},tieredVisibleWithScroll:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",visibility:"visible",opacity:1,height:"100%",display:"flex",overflow:"scroll"},tieredHidden:{WebkitTransition:"opacity 0.5s linear",transition:"opacity 0.5s linear",pointerEvents:"none",visibility:"hidden",opacity:0,height:"0"},fullScreenBanner:{bottom:"0px",color:"#fff",height:"100%",position:"fixed",left:"0px",width:"100%",zIndex:"680"},tieredFullPageSignup:{left:"50%",top:"50%",visibility:"visible",opacity:1,transition:"opacity 0.5s linear",margin:"auto"},tieredFullPageSignupHidden:{pointerEvents:"none",visibility:"hidden",opacity:0}},S=27;class y extends i.Component{constructor(e){super(e),E(this,"componentDidUpdate",e=>{const{bannerSize:t}=this.props,{bannerSize:n}=e;if(n!==g.a.FULL_SCREEN_BANNER&&t===g.a.FULL_SCREEN_BANNER&&!l.a("hasBeenShownLoginModalInOpen")){const e=this.getModalType(),t=this.props.hybridTier;Object(u.a)(`unauth_web_container.${r.a.INSPIRED_BANNER}.${t}.${e}.shown`)}n===g.a.FULL_SCREEN_BANNER&&t===g.a.QUARTER_SCREEN_BANNER&&(c.a.logLoginSignupModalView(),l.a("hasBeenShownLoginModalInOpen")||Object(p.d)())}),E(this,"getModalType",()=>this.props.signupSource===m.b.login?m.c.login:m.c.signupOrPersonalizedLogin),E(this,"handleCloseButtonClick",()=>{const e=this.getModalType();Object(u.a)(`unauth.authentication_modal.x_button_click.NOT_NOW_BUTTON.${e}`),Object(u.e)("click_close_prompted_modal"),this.props.canClose&&this.props.handleDismissSignupModal()}),E(this,"handleCloseClick",()=>{this.props.canClose&&this.props.handleDismissSignupModal()}),E(this,"handleContentClick",e=>{e.stopPropagation()}),E(this,"handleContentKeyDown",e=>{const{bannerSize:t,canClose:n,handleDismissSignupModal:i}=this.props;if(e.keyCode===S){const e=this.getModalType();Object(u.a)(`unauth.authentication_modal.esc_key_click.NOT_NOW_BUTTON.${e}`),n&&t===g.a.FULL_SCREEN_BANNER&&i&&(Object(u.a)(`unauth.authentication_modal.esc_key_click.DISMISSED.${e}`),i())}}),E(this,"handleEmptySpaceClick",()=>{Object(u.a)("unauth.unauth_banner_signup_modal.default.empty_space_click"),this.props.canClose&&this.handleCloseClick()}),E(this,"_handleLoginClick",()=>{this.track("login"),Object(u.e)("press_banner_login"),this.props.onLoginClick()}),E(this,"_handleSignupClick",()=>{this.track("signup"),Object(u.e)("press_banner_signup"),this.props.onSignupClick()}),E(this,"track",e=>{Object(u.a)(`unauth_hybrid_banner.${e}`)}),E(this,"isEligibleForInviterBanner",()=>{const{bannerSize:e,inviter:t}=this.props,n=!t||t.is_default_image;return t&&!n&&e===g.a.QUARTER_SCREEN_BANNER}),E(this,"renderUpsellDisplayText",()=>{const{inviter:e}=this.props,t=d.a._("You are signed out","Heading on the bottom right upsell suggesting user is not signed in","Heading on the bottom right upsell suggesting user is not signed in"),n=d.a._("Sign in to get the best experience","Subheader value prop on the bottom right upsell","Subheader value prop on the bottom right upsell"),i=e?e.full_name:"",o=e?e.image_medium_url:"",l=e?e.first_name:"",r=l?d.a._("Join {{ name }} on Pinterest for more ideas","value prop on the bottom banner from sender ( {{ name }})","value prop on the bottom banner from sender ( {{ name }})").replace("{{ name }}",l):t,c=this.isEligibleForInviterBanner(),h=c?o:"",p=c?i:"";return c?a.a.createElement(_.d,{"data-test-id":"invite_banner",display:"flex",justifyContent:"between",alignItems:"center",direction:"column",alignContent:"center"},a.a.createElement(_.d,{marginBottom:4},a.a.createElement(s.a,{name:p,size:"sm",src:h,outline:!0})),a.a.createElement(_.d,{marginBottom:4},a.a.createElement(_.r,{overflow:"normal",size:"sm",align:"center"},r))):a.a.createElement(_.d,{marginBottom:6},a.a.createElement(_.d,{marginBottom:2},a.a.createElement(_.r,{overflow:"normal",size:"sm",align:"center"},r)),a.a.createElement(_.T,{overflow:"normal",align:"center"},n))}),E(this,"renderFloatingUpsell",e=>{const t=d.a._("Log in","Text on the button on the bottom banner that leads unauthorized users to login.","Text on the button on the bottom banner that leads unauthorized users to login."),n=d.a._("Sign up","sign up button on the bottom banner","sign up button on the bottom banner"),i=a.a.createElement(_.d,{display:"flex",direction:"row",justifyContent:"center",minWidth:"100%"},a.a.createElement(_.d,{marginEnd:2,"data-test-id":"loginButton"},a.a.createElement(_.e,{size:"md",text:t,onClick:this.handleLoginClick})),a.a.createElement(_.d,{"data-test-id":"signupButton"},a.a.createElement(_.e,{size:"md",text:n,color:"red",onClick:this.handleSignupClick})));return a.a.createElement(_.d,{"data-test-id":"bottomRightUpsell",alignItems:"center",bottom:!0,right:!0,direction:"column",display:"flex",color:"white",paddingX:8,paddingY:8,position:"fixed",rounding:6,marginBottom:6,marginRight:6,dangerouslySetInlineStyle:{__style:{boxShadow:"0 1px 20px 0 rgba(0, 0, 0, 0.1)",transition:"all 0.3s ease-in-out",transform:e?"translateY(0)":"translateY(280px)",zIndex:"2"}}},a.a.createElement(_.d,{flex:"grow",maxWidth:220},this.renderUpsellDisplayText()),i)}),E(this,"render",()=>{const{bannerSize:e,canClose:t,fullPageSignup:n,inviter:i,signupSource:o,toggleType:l}=this.props,{styles:s}=this.state,d=n,c=e===g.a.FULL_SCREEN_BANNER,h=e===g.a.QUARTER_SCREEN_BANNER,p=c?{...s.container,...s.fullScreenBanner}:{},u=c?s.tieredVisibleWithScroll:s.tieredHidden,m=this.getModalType(),b=c?s.tieredFullPageSignup:s.tieredFullPageSignupHidden;return a.a.createElement("div",{"data-test-id":"giftWrap",style:p,onKeyDown:this.handleContentKeyDown,role:"dialog"},this.renderFloatingUpsell(h),a.a.createElement("div",{"data-test-id":"fullBanner",style:u,onClick:this.handleEmptySpaceClick,role:"dialog"},a.a.createElement("div",{style:b,onClick:this.handleContentClick,role:"dialog"},a.a.createElement(d,{toggleType:l,container:r.a.INSPIRED_BANNER,darkSignupTitle:!0,delayedTitleRender:!c,handleCloseClick:this.handleCloseClick,signupSource:o,type:m,disablePersonalizedLoginActivation:!0,inviter:i,showCloseIcon:t,handleCloseButtonClick:this.handleCloseButtonClick}))))}),this.handleSignupClick=this._handleSignupClick.bind(this),this.handleLoginClick=this._handleLoginClick.bind(this),this.state={styles:C}}}t.default=Object(h.compose)(Object(o.connect)(e=>({userInfo:e.loggedOutUserInfo&&e.loggedOutUserInfo.userInfo?e.loggedOutUserInfo.userInfo:{}}),()=>({})),b.e)(y)}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/UnauthBannerSignupModal-63a0707b8880d5e60c52.mjs.map