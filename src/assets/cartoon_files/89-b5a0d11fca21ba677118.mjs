(window.__LOADABLE_LOADED_CHUNKS__=window.__LOADABLE_LOADED_CHUNKS__||[]).push([[89],{AnoD:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("/MKj"),r=n("zFhk"),s=n("a8hX"),l=n("JKZO"),c=n("Ye/N"),d=n("zy/z"),m=n("4cpq"),u=n("aUfZ"),p=n("xmd6"),g=n("ANjH"),h=n("zywm"),f=n("/5zs"),y=n("xdpg"),C=n("U4JR"),E=n("eIuQ"),b=n("i9se"),_=n("pLLR"),T=n("n6mq");function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const O=5,M={anchorRefSet:!1,inputAreaFocused:!1,isTextChanged:!1,showConfirmDiscardModal:!1,submissionInProgress:!1,textValue:"",viewType:"text",userMentionOverLimitError:!1},I=2e3,A=(e,t)=>(e[t.id]=t,e);class k extends a.Component{constructor(...e){super(...e),x(this,"state",{...M,tags:this.props.tags||[],taggedUserMap:{},taggedUsers:this.props.taggedUsers||[],textValue:this.props.text||""}),x(this,"countTags",()=>this._textAreaRef&&this._textAreaRef.innerHTML?this._textAreaRef.querySelectorAll(".communityEditorMention").length:0),x(this,"setAnchorRef",e=>{this._suggestionAnchor=e,this.setState({anchorRefSet:!0})}),x(this,"setRef",e=>this._textAreaRef=e),x(this,"updateTags",e=>{const t=this.state.taggedUsers.concat(e),n=this.state.taggedUserMap;n[e.id]=A(e,this.state.taggedUserMap),this.setState({taggedUserMap:n,taggedUsers:t},()=>{this.setState({userMentionOverLimitError:this.countTags()>O})})}),x(this,"handleBlur",()=>{this.setState({inputAreaFocused:!1})}),x(this,"handleFocus",()=>{this.props.onEnter()}),x(this,"handleChange",({text:e,mentions:t})=>{t.length<this.state.tags.length&&Object(C.a)(8906,{tag_type:1}),this.setState({isTextChanged:!0,textValue:e,tags:t,userMentionOverLimitError:t.length>O})}),x(this,"handleOnClickEdit",()=>{const{onEditItem:e,requestContext:t,taggedUsers:n}=this.props;let a={};if(new f.c(t,"cp_mention_web").enabled()){const{textValue:e,tags:t}=this.state;a={contentMarkdown:e,imageSignatures:"",objectIds:[],tags:JSON.stringify(t)}}else{const{taggedUserMap:e}=this.state,t=Object(h.d)(this._textAreaRef,e,n);a={contentMarkdown:Object(y.j)(this._textAreaRef&&this._textAreaRef.textContent.trim()||""),imageSignatures:"",objectIds:[],tags:t}}e&&e(a),this.setState({submissionInProgress:!1})}),x(this,"handleOnClickPost",()=>{this.state.userMentionOverLimitError||(this.setState({submissionInProgress:!0}),this.handleOnClickPostFinal())}),x(this,"handleOnClickPostFinal",()=>{const{onAddItem:e,requestContext:t,taggedUsers:n}=this.props;let a={};if(new f.c(t,"cp_mention_web").enabled()){const{textValue:e,tags:t}=this.state;a={contentMarkdown:e,imageSignatures:"",objectIds:[],tags:JSON.stringify(t)}}else{const e=Object(h.d)(this._textAreaRef,this.state.taggedUserMap,n);a={contentMarkdown:Object(y.j)(this._textAreaRef&&this._textAreaRef.textContent.trim()||""),imageSignatures:"",objectIds:[],tags:e}}e&&e(a),this.setState(M)}),x(this,"handleOnFinalDiscardItem",()=>{const{onCancelItem:e}=this.props;this.setState(M),e()}),x(this,"handleTextChange",e=>{this.setState({isTextChanged:!(!this._textAreaRef||!this._textAreaRef.textContent.trim())&&e,userMentionOverLimitError:this.countTags()>O})}),x(this,"isSubmitEditDisabled",()=>{const{isTextChanged:e}=this.state;return!e}),x(this,"toggleShowConfirmDiscardModal",()=>{const{showConfirmDiscardModal:e}=this.state;this.setState({showConfirmDiscardModal:!e})}),x(this,"renderConfirmDiscardModal",()=>{const{statusType:e}=this.props;let t,n;return"textInFlightEdit"===e?(t=c.a._("Your changes will be discarded","Confirmation dialog before discarding changes","Confirmation dialog before discarding changes"),n=c.a._("Discard changes","Clear edits","Clear edits")):(t=c.a._("Once you delete a draft, you can’t undo it","Confirmation before discarding changes","Confirmation before discarding changes"),n=c.a._("Delete","delete draft of a post or comment","delete draft of a post or comment")),i.a.createElement(s.a,{accessibilityModalLabel:c.a._("Confirm discard composer","Confirm discarding a post or comment","Confirm discarding a post or comment"),heading:c.a._("Are you sure?","Confirm discarding a post or comment","Confirm discarding a post or comment"),cancelButtonText:c.a._("Cancel","Cancel discarding a post or comment","Cancel discarding a post or comment"),confirmButtonText:n,detail:t,onConfirm:this.handleOnFinalDiscardItem,onDismiss:this.toggleShowConfirmDiscardModal})}),x(this,"getReplyToEntity",e=>{return[e?`@${e.user.username} `:"",e?[{offset:0,object_id:e.user.id,length:e.user.username.length+1,tag_type:1}]:[]]})}static getDerivedStateFromProps(e,t){return e.replyToObject?{taggedUserMap:A(t.taggedUserMap,e.replyToObject.user)}:{}}componentDidUpdate(e){const{statusType:t,objectType:n,parentObjectId:a}=this.props;"textInflightCreation"!==e.statusType&&"textInflightCreation"===t&&Object(C.a)(101,{element:this.composeContextLogElementMap[n],component:this.composeContextLogComponentMap[n],objectId:a})}get isPost(){const{objectType:e}=this.props;return e===b.a.BOARD_ACTIVITY}get isBoardActivityComment(){return this.props.objectType===b.a.BOARD_ACTIVITY_COMMENT}get isAggregatedComment(){const{objectType:e}=this.props;return e===p.a.pin||e===p.a.didIt||e===p.a.aggregatedComment}get composeContextLogComponentMap(){return{[b.a.BOARD_ACTIVITY_COMMENT]:13191,[b.a.BOARD_ACTIVITY]:13190}}get composeContextLogElementMap(){return{[b.a.BOARD_ACTIVITY_COMMENT]:10624,[b.a.BOARD_ACTIVITY]:10624}}render(){const{avatarSize:e,replyToObject:t,requestContext:n,privatePin:a,statusType:o,viewingUser:s}=this.props,{anchorRefSet:u,inputAreaFocused:p,isTextChanged:g,showConfirmDiscardModal:h,submissionInProgress:y,tags:b,taggedUsers:_,textValue:x,userMentionOverLimitError:O}=this.state,M={borderRadius:8,boxShadow:"0 0 0 4px rgba(0,132,255,.5)"},A={background:"transparent",border:"0",display:g?"inline-block":"block",minHeight:"textStaticDisplay"===o?"":"50px",fontSize:"16px",outline:"0",overflowX:"hidden",resize:"none",whiteSpace:"pre-wrap",width:"100%"},[k,v]=this.getReplyToEntity(t),w=i.a.createElement(T.d,null,i.a.createElement(T.T,{color:"red",size:"sm",align:"right"},Object(E.d)(!1)));let R,S;R=this.isPost?c.a._("Start a discussion","Writing a post","Writing a post"):this.isAggregatedComment&&a?c.a._("Add a public comment","Add a comment","Add a comment"):this.isAggregatedComment?c.a._("Add a comment","Prompt to add a comment","Prompt to add a comment"):this.isBoardActivityComment?c.a._("Add comment","Prompt to add a comment","Prompt to add a comment"):c.a._("Reply","Adding text to a community comment","Adding text to a community comment"),S=this.isPost?c.a._("Post","Create a post","Create a post"):this.isAggregatedComment?c.a._("Done","Post a top level comment on a pin or tried it","Post a top level comment on a pin or tried it"):c.a._("Reply","Posting a reply to a post or comment","Posting a reply to a post or comment");const j=new f.c(n,"cp_mention_web").enabled(),D=g;return"textInflightCreation"===o?i.a.createElement(T.d,{column:12,display:"flex",justifyContent:"center"},i.a.createElement(T.d,{width:"100%"},i.a.createElement(T.d,{display:"flex"},i.a.createElement(T.d,{marginEnd:2},i.a.createElement(r.a,{user:s,size:e})),i.a.createElement(T.d,{flex:"grow",padding:4,rounding:4,borderSize:"sm"},j?i.a.createElement(l.a,{focusOnMount:!0,initialMentions:v,initialText:k,onAddMention:()=>{Object(C.a)(8905,{tag_type:1})},onBlur:this.handleBlur,onChange:this.handleChange,onSearchMentionCancel:()=>{Object(C.a)(8908,{tag_type:1})},onSuggestionsPopoverOpen:()=>{Object(C.a)(8907,{tag_type:1})},placeholder:R}):i.a.createElement("div",{ref:this.setAnchorRef,style:p?M:{}},i.a.createElement(T.d,{display:"flex",rounding:2},u&&i.a.createElement(d.a,{shouldLoseFocus:h,handleBlur:this.handleBlur,style:A,setRef:this.setRef,suggestionAnchor:this._suggestionAnchor,updateTags:this.updateTags,existingTags:b,replyToObject:t,taggedUsers:_,textValue:x,onChange:this.handleTextChange}))))),O&&w,i.a.createElement(T.d,{display:"flex",justifyContent:"end",marginTop:4},i.a.createElement(T.e,{color:"gray",inline:!0,onClick:D?this.toggleShowConfirmDiscardModal:this.handleOnFinalDiscardItem,text:c.a._("Cancel","Cancel making post or comment","Cancel making post or comment")}),i.a.createElement(T.d,{marginStart:2},i.a.createElement(m.a,{id:"activity-item-create-submit"},i.a.createElement(T.e,{color:"red",disabled:!g||y,inline:!0,onClick:this.handleOnClickPost,text:S}))))),h&&this.renderConfirmDiscardModal()):"textInFlightEdit"===o?i.a.createElement(T.d,{column:12,display:"flex",justifyContent:"center"},i.a.createElement(T.d,{width:"100%"},i.a.createElement(T.d,{display:"flex"},i.a.createElement(T.d,{width:"100%",padding:4,rounding:4,borderSize:"sm"},j?i.a.createElement(l.a,{focusOnMount:!0,initialMentions:b,initialText:x,onAddMention:()=>{Object(C.a)(8905,{tag_type:1})},onBlur:this.handleBlur,onChange:this.handleChange,onSearchMentionCancel:()=>{Object(C.a)(8908,{tag_type:1})},onSuggestionsPopoverOpen:()=>{Object(C.a)(8907,{tag_type:1})},placeholder:R}):i.a.createElement("div",{ref:this.setAnchorRef,style:p?M:{}},i.a.createElement(T.d,{display:"flex",rounding:2},u&&i.a.createElement(d.a,{handleBlur:this.handleBlur,style:A,setRef:this.setRef,suggestionAnchor:this._suggestionAnchor,updateTags:this.updateTags,existingTags:b,taggedUsers:_,textValue:x,onChange:this.handleTextChange}))))),O&&w,i.a.createElement(T.d,{display:"flex",justifyContent:"end",marginTop:4},i.a.createElement(T.e,{color:"gray",inline:!0,onClick:D?this.toggleShowConfirmDiscardModal:this.handleOnFinalDiscardItem,text:c.a._("Cancel","Cancel making post or comment","Cancel making post or comment")}),i.a.createElement(T.d,{marginStart:2},i.a.createElement(T.e,{color:"red",disabled:this.isSubmitEditDisabled()||y,inline:!0,onClick:this.handleOnClickEdit,text:c.a._("Edit","Edit a post","Edit a post")})))),h&&this.renderConfirmDiscardModal()):i.a.createElement(T.d,{alignItems:"center",display:"flex",justifyContent:"between",rounding:2},i.a.createElement("div",{onKeyDown:this.handleFocus,onClick:this.handleFocus,role:"textbox",tabIndex:"0",style:{cursor:"text",width:"100%"}},i.a.createElement(T.d,{column:12,display:"flex"},i.a.createElement(T.d,{width:48},i.a.createElement(r.a,{user:s,size:e})),i.a.createElement(T.d,{dangerouslySetInlineStyle:{__style:{borderRadius:"26px"}},width:"100%",height:48,alignItems:"center",display:"flex",marginStart:4,padding:4,borderSize:"sm"},i.a.createElement("textarea",{maxLength:I,name:"communityItemTextBox",onBlur:this.handleBlur,onFocus:this.handleFocus,placeholder:R,ref:e=>{this._textAreaRef=e},rows:1,style:A})))))}}x(k,"defaultProps",{imageSignature:"",onEnter:()=>{},showWelcomeEducation:!1,text:"",widthAuto:!1});const v={image_medium_url:"",type:"user",username:"",full_name:"",first_name:"",id:""};t.a=Object(g.compose)(Object(o.connect)(e=>{const{viewer:t}=e;return v.image_medium_url=t.imageMediumUrl,v.username=t.username,v.full_name=t.fullName,{viewingUser:v}},()=>({})),_.e,u.a)(k)},EXPn:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("Ye/N"),r=n("LT60"),s=n("4cpq"),l=n("n6mq");function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d=({action:e,label:t,testId:n})=>i.a.createElement(s.a,{id:`flyout-item-${n}`},i.a.createElement(l.e,{accessibilityLabel:t,color:"white",text:t,onClick:e}));class m extends i.a.PureComponent{constructor(...e){super(...e),c(this,"state",{isFlyoutOpen:!1}),c(this,"toggleFlyout",e=>{const t=(e||{}).event||{};t.preventDefault&&(t.preventDefault(),t.stopPropagation()),this.setState({isFlyoutOpen:!this.state.isFlyoutOpen})})}render(){const{handleClickReport:e,handleDelete:t,handleOnEdit:n,handleRemoveMention:a,small:c}=this.props,{isFlyoutOpen:m}=this.state;return e||t||n||a?i.a.createElement(l.d,{display:"flex",direction:"column",alignItems:"end"},i.a.createElement(l.d,null,i.a.createElement(l.d,{ref:e=>{this.flyoutAnchor=e}},i.a.createElement(s.a,{id:"flyout-toggle"},i.a.createElement(l.t,{accessibilityExpanded:m,accessibilityHaspopup:!0,accessibilityLabel:o.a._("more options","accessible label for button to see more options on report content","accessible label for button to see more options on report content"),icon:"ellipsis",onClick:this.toggleFlyout,size:c?"sm":"md"}))),m&&i.a.createElement(l.w,null,i.a.createElement(r.a,null,i.a.createElement(s.a,{id:"flyout"},i.a.createElement(l.p,{anchor:this.flyoutAnchor,idealDirection:"down",onDismiss:this.toggleFlyout,positionRelativeToAnchor:!1,size:"sm"},i.a.createElement(l.d,{width:"100%"},n&&i.a.createElement(d,{action:n,label:o.a._("Edit","Edit a community post or comment","Edit a community post or comment"),testId:"edit"}),t&&i.a.createElement(d,{action:t,label:o.a._("Delete","Delete a community post or comment","Delete a community post or comment"),testId:"delete"}),e&&i.a.createElement(d,{action:e,label:o.a._("Report this content","Report a community post or comment","Report a community post or comment"),testId:"report"}),a&&i.a.createElement(d,{action:()=>{a(),this.toggleFlyout()},label:o.a._("Remove @mention","closeup.activityItem.removeMention","Button that allows user to remove their @mention in a comment on a pin"),testId:"removeMention"})))))))):null}}c(m,"defaultProps",{handleClickReport:null,handleDelete:null,handleOnEdit:null,handleRemoveMention:null}),t.a=m},JKZO:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("nokP"),r=n.n(o),s=n("yeYm"),l=n.n(s),c=n("clxp"),d=n("Cufx"),m=n("Ye/N"),u=n("n6mq");var p=e=>{const{id:t,isFocused:n,onMouseDown:a,onMouseEnter:o,onMouseUp:r,mention:s,role:l,searchValue:c}=e;return i.a.createElement("div",{id:t,onMouseDown:a,onMouseEnter:o,onMouseUp:r,searchvalue:c,role:l},i.a.createElement(u.d,{display:"flex",alignItems:"center",color:n?"lightGray":"transparent",rounding:4,dangerouslySetInlineStyle:{__style:{cursor:"pointer"}}},i.a.createElement(u.d,{padding:1},i.a.createElement(d.a,{accessibilityLabel:"",name:s.full_name,size:"sm",src:s.image_medium_url,verified:s.verified_identity&&s.verified_identity.verified})),i.a.createElement(u.d,{marginStart:2,marginEnd:2,overflow:"hidden"},i.a.createElement(u.T,{truncate:!0,weight:"bold",color:"darkGray"},s.full_name),i.a.createElement(u.d,{dangerouslySetInlineStyle:{__style:{whiteSpace:"nowrap"}}},i.a.createElement(u.T,{size:"sm",color:"darkGray"},s.username,s.explicitly_followed_by_me&&` • ${m.a._("Following","mentions.mentionsFlyout.following","Label to tell the user that they are viewing a user they follow")}`)))))},g=n("eOdZ"),h=n("vxan"),f=n("aAE7"),y=n.n(f),C=n("v83y"),E=n("TiQD");const b=({decoratorRect:e,popover:t,state:n,props:a,...i})=>{const o=(e.x||e.left)+t.offsetWidth,{top:r,left:s}=y()({decoratorRect:e,popover:t,state:n,props:a});let l=null;return o>window.innerWidth&&(l=`${parseFloat(s)-o%window.innerWidth}px`),{display:"block",top:`${parseFloat(r)+5}px`,left:l||s,zIndex:new u.l([E.a]).index()}},_=e=>i.a.createElement(u.T,{inline:!0,color:"blue",weight:"bold"},e.children);t.a=Object(h.a)(({focusOnMount:e,initialMentions:t=[],initialText:n="",instanceId:o,maxSuggestions:s=5,makeCancelablePromise:d,onAddMention:m,onBlur:h,onChange:f,onFocus:y,onSearchMentionCancel:E,onSuggestionsPopoverClose:T,onSuggestionsPopoverOpen:x,placeholder:O,readOnly:M,spellCheck:I})=>{const A=Object(a.useRef)(null),[k,v]=Object(a.useState)(!1),[w,R]=Object(a.useState)(!1),[S,j]=Object(a.useState)([]),[{plugins:D,MentionSuggestions:B}]=Object(a.useState)(()=>(()=>{const e=r()({entityMutability:"IMMUTABLE",mentionComponent:_,mentionPrefix:"@",mentionTrigger:"@",positionSuggestions:b,supportWhitespace:!1}),{MentionSuggestions:t}=e;return{plugins:[e],MentionSuggestions:t}})()),[L,P]=Object(a.useState)();Object(a.useEffect)(()=>{P(C.EditorState.createWithContent((({text:e,mentions:t})=>{const n=[],a={},i=[];return t&&t.forEach((e,t)=>{const{length:n,offset:o,object_id:r}=e;a[t]={data:{mention:{id:r}},mutability:"IMMUTABLE",type:"mention"},i.push({key:t,length:n,offset:o})}),n.push({text:e,key:null,depth:null,inlineStyleRanges:null,type:"unstyled",entityRanges:i}),Object(C.convertFromRaw)({entityMap:a,blocks:n})})({text:n,mentions:t})))},[o]),Object(a.useEffect)(()=>{v(!0)},[]),Object(a.useEffect)(()=>{e&&A.current&&setTimeout(A.current.focus,50)},[k]);const U=Object(a.useCallback)(e=>{j([]),m&&m(e)},[]),F=Object(a.useCallback)(e=>{h&&h(e)},[]),z=Object(a.useCallback)(e=>{const t=e.getCurrentContent(),n=t.getPlainText(""),a=(e=>{const t=[];let n=0;return e.getBlocksAsArray().forEach((a,i)=>{let o=null;a.findEntityRanges(t=>{const n=t.getEntity();if(!n)return!1;const a=e.getEntity(n);return"mention"===a.getType()&&(o=a.data.mention,!0)},(e,a)=>{o&&t.push({object_id:o.id,offset:n+e,length:a-e,tag_type:1})}),n+=1+a.getLength()}),t})(t);P(e),f({text:n,mentions:a})},[]),N=Object(a.useCallback)(e=>{y&&y(e)},[]),V=Object(a.useCallback)(()=>{R(!1),T&&T()},[]),Y=Object(a.useCallback)(()=>{R(!0),x&&x()},[]),H=Object(a.useCallback)((e,t)=>{if(E&&" "===e&&w&&E(),S.length>0)return"not-handled";const n=t.getCurrentContent(),a=t.getSelection();return z(C.EditorState.push(t,C.Modifier.replaceText(n,a,e),"adjust-depth")),"handled"},[S]),q=Object(a.useCallback)(({value:e})=>{d(g.a.create("UserMentionTypeaheadResource",{query:e,num_people:s}).callGet(),"userMentionTypeahead").then(e=>{const t=(({suggestions:e})=>e.map(e=>({...e,name:e.username})))({suggestions:e.resource_response.data});j(t)}).catch(()=>{})},[]);return i.a.createElement(c.a,{name:"EditorWithMentions"},k&&i.a.createElement(u.d,{"data-test-id":"editor-with-mentions",width:"100%"},i.a.createElement(l.a,{editorState:L,onBlur:F,onChange:z,onFocus:N,handleBeforeInput:H,placeholder:O,plugins:D,readOnly:M,ref:A,spellCheck:I,stripPastedStyles:!0}),i.a.createElement(B,{onAddMention:U,onClose:V,onOpen:Y,onSearchChange:q,suggestions:S,entryComponent:p})))})},Klk4:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("zFhk"),r=n("3gA6"),s=n("n6mq"),l=n("GsvW");var c=function({createdAt:e,commentId:t,user:n}){const a=i.a.createElement(s.T,{color:"gray",size:"md"},Object(l.f)(e));return i.a.createElement(s.d,{display:"flex",alignItems:"start",marginStart:-1,marginEnd:-1},i.a.createElement(s.d,{paddingX:1},i.a.createElement(r.b,{to:`/${n.username}/`},i.a.createElement(s.T,{size:"md",weight:"bold"},Object(l.e)(n)))),i.a.createElement(s.d,{paddingX:1},a))},d=n("lUXN"),m=n("xNI5"),u=n("VbOu"),p=n("4cpq"),g=n("dwea"),h=n("3eT9"),f=n("gI5O"),y=n("AnoD");function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const E=1500,b=1e3;class _ extends i.a.PureComponent{constructor(...e){super(...e),C(this,"state",{isFeaturedHighlighting:this.props.commentId===this.props.featuredCommentId}),C(this,"renderEditMode",()=>{const{contentImage:e,contentImageSignature:t,contentText:n,handleOnEdited:a,handleOnEditCancel:o,hideAddObjects:r,parentObject:s,pins:l,tags:c,taggedUsers:d,type:m}=this.props;return i.a.createElement(y.a,{addedObjects:l,addedImage:e,hideAddObjects:r,imageSignature:t,objectType:m,onAddItem:()=>{},onCancelItem:o,onEditItem:a,onEnter:()=>{},parentObjectId:s.id,statusType:"textInFlightEdit",tags:c,taggedUsers:d,text:n,widthAuto:!0})})}componentDidMount(){this.props.commentId===this.props.featuredCommentId&&g.a.setTimeout(()=>{this.setState({isFeaturedHighlighting:!1})},E)}render(){const{allowLink:e,avatarSize:t,createdAt:n,commentCount:r,commentId:l,commentAuthor:g,contentText:f,flyout:y,handleHelpfulClick:C,handleLikeClick:E,handleReplyClick:_,handleReplyCountClick:T,helpfulCount:x,hideReplyCount:O,inEditMode:M,isLikedByMe:I,isMarkedHelpfulByMe:A,isPlainComment:k,reactionCounts:v,tags:w,taggedUsers:R,handleLikeCountClick:S,truncateText:j}=this.props,{isFeaturedHighlighting:D}=this.state;return i.a.createElement(p.a,{id:"canonical-comment"},i.a.createElement(s.d,{display:"flex",marginBottom:k?4:0},i.a.createElement(s.d,{marginEnd:2},i.a.createElement(o.a,{user:g,size:t})),i.a.createElement(s.d,{flex:"grow",marginStart:2},i.a.createElement(s.d,{dangerouslySetInlineStyle:{__style:{borderColor:M?"transparent":void 0,transition:`${b}ms`,backgroundColor:D?"lightGray":null}},borderSize:"sm",padding:M?0:3,rounding:4},M?this.renderEditMode():i.a.createElement(a.Fragment,null,i.a.createElement(c,{commentId:l,createdAt:n,user:g}),j?i.a.createElement(h.a,{allowLink:e,allowReveal:!0,size:"sm",taggedUsers:R,tags:w,text:f}):i.a.createElement(u.a,{allowLink:e,size:"sm",tags:w,taggedUsers:R,text:f}))),!M&&!k&&i.a.createElement(s.d,{padding:1},i.a.createElement(d.a,{name:"web_comment_mark_as_helpful_v2"},({group:e})=>i.a.createElement(m.default,{commentCount:r,flyout:M?null:y,hideReplyCount:O,isLikedByMe:I,onLikeClick:E,onLikeCountClick:S,onReplyClick:_,onReplyCountClick:T,reactionCounts:v,helpfulExperimentGroup:e,isMarkedHelpfulByMe:A,onHelpfulClick:C,helpfulCount:x,small:!0}))))))}}C(_,"defaultProps",{allowLink:!1,avatarSize:"sm"});t.a=Object(f.b)(_)},a8hX:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("TiQD"),r=n("4cpq"),s=n("n6mq");t.a=({accessibilityModalLabel:e,cancelButtonText:t,confirmButtonText:n,detail:a,heading:l,onConfirm:c,onDismiss:d})=>i.a.createElement(o.b,{accessibilityModalLabel:e,heading:l,onDismiss:d,size:"md"},i.a.createElement(s.d,null,i.a.createElement(s.d,{padding:4},i.a.createElement(s.T,null,a)),i.a.createElement(s.d,{display:"flex",justifyContent:"end"},i.a.createElement(s.d,{margin:2},i.a.createElement(r.a,{id:"confirm-modal-cancel"},i.a.createElement(s.e,{onClick:d,text:t}))),i.a.createElement(s.d,{margin:2},i.a.createElement(r.a,{id:"confirm-modal-confirm"},i.a.createElement(s.e,{color:"red",onClick:()=>{c(),d()},text:n}))))))},eIuQ:function(e,t,n){n.d(t,"b",(function(){return i})),n.d(t,"a",(function(){return o})),n.d(t,"d",(function(){return r})),n.d(t,"e",(function(){return s})),n.d(t,"c",(function(){return l}));var a=n("Ye/N");function i(e){return e?a.a._("Title too long. Make sure all cards' titles have less than 100 characters","Title entered is too long while editing a carousel pin and/or one of its pins","Title entered is too long while editing a carousel pin and/or one of its pins"):a.a._("Title too long. Make sure title has less than 100 characters","Title entered is too long while editing a pin","Title entered is too long while editing a pin")}function o(e){return e?a.a._("Description too long. Make sure all cards' descriptions have less than 500 characters","Description entered is too long while editing a carousel pin and/or one of its pins","Description entered is too long while editing a carousel pin and/or one of its pins"):a.a._("Description too long. Make sure description has less than 500 characters","Description entered is too long while editing a pin","Description entered is too long while editing a pin")}function r(e){return a.a._("Too many mentions. Make sure you have at most 5.","editPinModal.errorMessages.userMentionOverLimit","Too many mentions used in the description")}function s(e){return e?a.a._("Note too long. Make sure all cards' notes have less than 500 characters","User note entered is too long while editing a carousel pin and/or one of its pins","User note entered is too long while editing a carousel pin and/or one of its pins"):a.a._("Note too long. Make sure note has less than 500 characters","User note entered is too long while editing a pin","User note entered is too long while editing a pin")}function l(e){return e?a.a._("Need to provide a valid URL. Make sure all cards' links are valid","Invalid URL/link provided while editing a carousel pin and/or one of its pins","Invalid URL/link provided while editing a carousel pin and/or one of its pins"):a.a._("Need to provide a valid URL. Make sure the link is valid","Invalid URL/link provided while editing a pin","Invalid URL/link provided while editing a pin")}},gI5O:function(e,t,n){n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return s}));var a=n("q1tI"),i=n.n(a);const o=Object(a.createContext)(null),r=o.Provider;function s(e){const t=t=>{const n=Object(a.useContext)(o);return i.a.createElement(e,Object.assign({},t,n))};return t.displayName=`FeaturedCommentContext(${String(e.displayName||e.name)})`,t}o.Provider},i9se:function(e,t,n){n.d(t,"c",(function(){return l})),n.d(t,"a",(function(){return c})),n.d(t,"b",(function(){return d}));var a=n("Y+p1"),i=n.n(a),o=n("QkVN"),r=n.n(o),s=n("KFEb");const l={boardactivity:"BoardActivityResource",boardactivitycomment:"BoardActivityCommentResource"},c={BOARD:"board",BOARD_ACTIVITY:"boardactivity",BOARD_ACTIVITY_COMMENT:"boardactivitycomment"},d={[c.BOARD]:s.a.BOARD_ACTIVITYITEMS,[c.BOARD_ACTIVITY]:s.a.BOARD_ACTIVITYCOMMENTS,[c.BOARD_ACTIVITY_COMMENT]:s.a.BOARD_ACTIVITYCOMMENTS},m={},u=(e,t)=>{const n={...r()({},e,t),...t.content?{content:t.content}:{},...t.reaction_counts?{reaction_counts:t.reaction_counts}:{}};return i()(e,n)?e:n},p=e=>e.reduce((e,t)=>{if(11===t.activity_type&&t.comment&&t.ref_board_activity){const n=t.comment,a=t.ref_board_activity;n&&a&&(e.push({...n,user:t.user}),e.push(a),e.push({...t,comment:{id:n.id},ref_board_activity:{id:a.id}}))}else e.push(t);return e},[]);t.d=(e=m,t)=>{if("RESOURCE_FETCH_COMPLETE"===t.type||"RESOURCE_FETCH_MORE_COMPLETE"===t.type){const{payload:{data:n,name:a,options:i}}=t;if("BoardActivityCommentFeedResource"===a){const t=(n||[]).reduce((t,n)=>(t[n.id]=u(e[n.id],n),t),{});return{...e,...t}}if("BoardActivityFeedResource"===a){const t=p(n||[]).reduce((t,n)=>(t[n.id]=u(e[n.id],n),t),{});return{...e,...t}}if("BoardActivityResource"===a&&n){const t=n;return{...e,[t.id]:u(e[t.id],t)}}if("BoardActivityPinsGridCommentsResource"===a){const t=Object.values(n||{}).reduce((e,t)=>e.concat(t||[]),[]).reduce((t,n)=>Object.prototype.hasOwnProperty.call(n,"id")?{...t,[n.id]:u(e[n.id],n)}:t,{});return{...e,...t}}if("BoardActivityCommentResource"===a&&n){const t=n,a={[t.id]:u(e[t.id],t)};if(t.root_board_activity){const n=t.root_board_activity.id;a[n]=u(e[n],t.root_board_activity)}return{...e,...a}}if("NewsHubDetailsResource"===a&&n&&n.length>0&&n[0].content_items){const t={};return n.forEach(e=>{e.content_items.forEach(e=>{const n=e.content_object&&e.content_object.type;if(n===c.BOARD_ACTIVITY_COMMENT||n===c.BOARD_ACTIVITY){const n=e.content_object;p([n]).forEach(e=>t[e.id]=e)}})}),{...e,...t}}if(["PinResource","PinPageResource"].includes(a)&&n&&n.board_activity){const t=n.board_activity;return t.board=n.board,{...e,[t.id]:u(e[t.id],t)}}if(("BoardFeedResource"===a||"BoardSectionPinsResource"===a)&&("react_grid_pin_with_board_activity"===i.field_set_key||"partner_react_grid_pin_with_board_activity"===i.field_set_key)||"BoardActivityPinsFeedResource"===a){const t=(n||[]).reduce((t,n)=>{const a=n.board_activity;return a&&a.id&&(t[a.id]=u(e[a.id],a)),t},{});return{...e,...t}}}else{if("ACTIVITY_ITEM_CREATED"===t.type){const{payload:{activityItem:n}}=t;return{...e,[n.id]:n}}if("ACTIVITY_ITEM_DELETED"===t.type){const{payload:{activityId:n,activityType:a}}=t;if(a===c.BOARD_ACTIVITY_COMMENT||a===c.BOARD_ACTIVITY){const t={...e};return delete t[n],t}}else{if("ACTIVITY_ITEM_UPDATED"===t.type){const{payload:{data:n}}=t;return{...e,[n.id]:u(e[n.id],n)}}if("UPDATE_ACTIVITY_ITEM_COMMENT_COUNT"===t.type){const{payload:{increment:n,id:a}}=t,i=e[a];if(i&&[c.BOARD_ACTIVITY_COMMENT,c.BOARD_ACTIVITY].includes(i.type)){const t={...i,comment_count:n?i.comment_count+1:i.comment_count-1};return{...e,[a]:t}}}else if("ACTIVITY_ITEM_UPDATE_REACTION_COUNT"===t.type){const{payload:{increment:n,id:a,reactionType:i}}=t,o=e[a]||{},{reaction_counts:r={}}=o,s=r[i]||0,l=n?s+1:Math.max(s-1,0),c=n?i:0,d={...o,reaction_counts:{...r,[i]:l},reaction_by_me:c};return{...e,[a]:d}}}}return e}},xNI5:function(e,t,n){n.r(t),n.d(t,"HelpfulButton",(function(){return m})),n.d(t,"default",(function(){return p}));var a=n("q1tI"),i=n.n(a),o=n("xdpg"),r=n("Ye/N"),s=n("4cpq"),l=n("vvax"),c=n("n6mq");const d={__path:"M21 14.09a2.1 2.1 0 01-2.11 2.08 2.1 2.1 0 012.11 2.1 2.1 2.1 0 01-2.11 2.08H16.5c1.02 0 1.85.82 1.85 1.82 0 1.01-.83 1.83-1.85 1.83H9.9A7.87 7.87 0 012 16.17c0-2.2.93-4.2 2.41-5.61 2.19-2.3 3.4-5.3 3.4-8.47A2.1 2.1 0 019.9 0a2.1 2.1 0 012.12 2.09c0 1.99-.37 3.92-1.05 5.74h7.9A2.1 2.1 0 0121 9.9a2.1 2.1 0 01-2.11 2.1A2.1 2.1 0 0121 14.09z"};function m(e){const{helpfulCount:t,isMarkedHelpfulByMe:n,onHelpfulClick:a}=e,o=r.a._("Helpful","Comments marked helpful text.","Comments marked helpful text."),s=Object(l.b)(r.a._("Helpful {{helpfulCount}}","Comments marked helpful count text.","Comments marked helpful count text."),{helpfulCount:t||0});return i.a.createElement(c.d,{display:"flex",justifyContent:"center",alignItems:"center"},i.a.createElement(c.S,{onTap:a,rounding:2},i.a.createElement(c.H,null,i.a.createElement(c.s,{accessibilityLabel:"helpful icon",dangerouslySetSvgPath:d,color:n?"red":"gray",size:16}),i.a.createElement(c.d,{paddingX:1},i.a.createElement(c.T,{size:"sm",color:"gray",weight:"bold"},void 0!==t&&t>0?s:o)))))}function u(e){const{likeCount:t,isLikedByMe:n,onLikeClick:a}=e;return i.a.createElement(c.d,{display:"flex",justifyContent:"center",alignItems:"center"},i.a.createElement(c.S,{onTap:a,rounding:2},i.a.createElement(c.d,{display:"flex"},i.a.createElement(c.s,{accessibilityLabel:"helpful icon",icon:"heart",color:n?"red":"gray",size:16}),t>0&&i.a.createElement(c.d,{paddingX:1},i.a.createElement(c.T,{size:"sm",color:"gray",weight:"bold"},t)))))}function p(e){const{commentCount:t=0,reactionCounts:n={},hideReplyCount:a,isLikedByMe:l=!1,onLikeClick:d,onLikeCountClick:p,onReplyClick:g,onReplyCountClick:h,isMarkedHelpfulByMe:f,onHelpfulClick:y,helpfulCount:C,helpfulExperimentGroup:E,flyout:b,small:_}=e,T=n[1]||0,x=!!T&&o.i(r.a.ngettext("{{likeCount}} like","{{likeCount}} likes",T),{likeCount:T}),O=!!t&&o.i(r.a.ngettext("{{commentCount}} reply","{{commentCount}} replies",t),{commentCount:t}),M=_?1:2;return i.a.createElement(c.d,{display:"flex",alignItems:"center"},i.a.createElement(c.d,{display:"flex",marginStart:-M,marginEnd:-M},(E||"").startsWith("enabled_2")&&i.a.createElement(m,{helpfulCount:C,isMarkedHelpfulByMe:f,onHelpfulClick:y}),(E||"").startsWith("enabled_1")&&i.a.createElement(u,{likeCount:T,isLikedByMe:l,onLikeClick:d}),!(E||"").startsWith("enabled")&&i.a.createElement(c.d,{paddingX:M},i.a.createElement(s.a,{id:"reactions-like"},i.a.createElement(c.t,{accessibilityLabel:"Like",bgColor:"transparent",icon:"heart",iconColor:l?"red":"gray",onClick:d,size:_?"sm":"md"}))),i.a.createElement(c.d,{paddingX:M},i.a.createElement(s.a,{id:"reactions-reply"},i.a.createElement(c.t,{accessibilityLabel:"Reply",bgColor:"transparent",icon:"speech",iconColor:"gray",onClick:g,size:_?"sm":"md"}))),!!b&&i.a.createElement(c.d,{paddingX:M},b)),i.a.createElement(c.d,{display:"flex",flex:"grow",justifyContent:"end",marginStart:-3,marginEnd:-3},!!x&&!(E||"").startsWith("enabled")&&i.a.createElement(s.a,{id:"reactions-like-count"},i.a.createElement(c.d,{paddingX:3},i.a.createElement(c.S,{onTap:p,rounding:2},i.a.createElement(c.T,{size:"md",color:"gray",weight:"bold"},x)))),!!O&&!a&&i.a.createElement(s.a,{id:"reactions-reply-count"},i.a.createElement(c.d,{paddingX:3},h?i.a.createElement(c.S,{onTap:h,rounding:2},i.a.createElement(c.T,{size:"md",color:"gray",weight:"bold"},O)):i.a.createElement(c.T,{size:"md",color:"gray",weight:"bold"},O))),(E||"").startsWith("enabled_1")&&i.a.createElement(m,{helpfulCount:C,isMarkedHelpfulByMe:f,onHelpfulClick:y})))}},zFhk:function(e,t,n){var a=n("q1tI"),i=n.n(a),o=n("Cufx"),r=n("3gA6"),s=n("n6mq");const l={sm:32,md:48};t.a=function({user:e,size:t="md",hasOutline:n}){const{first_name:a,image_medium_url:c,username:d}=e;return i.a.createElement(r.b,{stopPropagation:!0,to:`/${d}/`},i.a.createElement(s.d,{position:"relative",width:l[t],height:l[t]},i.a.createElement(o.a,{size:t,src:c,name:a||d||"",outline:n})))}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/js/89-b5a0d11fca21ba677118.mjs.map